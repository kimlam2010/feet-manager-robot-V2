#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Run TypeScript type checking
echo "ğŸ” Running TypeScript type checking..."
npm run typecheck

# Run linting
echo "ğŸ¨ Running ESLint..."
npm run lint

# Run formatting
echo "âœ¨ Running formatting..."
npm run format

# Start dev server in background
echo "ğŸš€ Starting development server..."
npm run dev & 
DEV_PID=$!

# Wait for dev server to start (adjust sleep time if needed)
sleep 10

# Run tests
echo "ğŸ§ª Running tests..."
npm run test

# Stop dev server
kill $DEV_PID

# Run build
echo "ğŸ“¦ Verifying production build..."
npm run build || exit 1

echo "âœ… All checks passed!" 